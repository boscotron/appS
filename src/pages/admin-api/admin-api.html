<!--
  Generated template for the ModuloPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Administrador de API's</ion-title>
  </ion-navbar>
</ion-header>
<ion-content padding>	
	<ion-grid>
		  <ion-row>
		    <ion-col col-md-4 col-sm-12> 
				<p>Administrador de API´s Key</p>
				<ion-list>
				 <ion-item>
				    <ion-label floating>Nombre de nueva API </ion-label>
				    <ion-input type="text" value=""  [(ngModel)]="json_head.nombre"></ion-input>
				  </ion-item>
				</ion-list>
				<ion-row>
					<button ion-button color="energy" (click)="api_guardar()">Agregar API y generar KEY</button>
				</ion-row>
				 <p>Generar una base de datos nueva</p>			 
					<ion-list>
					  <ion-item>
					    <ion-label floating>Seleccione la empresa</ion-label>
					    <ion-select [(ngModel)]="form_nueva_db.id_empresa">
					    	<ion-option *ngFor="let empresa of empresas" value="{{empresa.id_empresa}}">
					            {{empresa.nombre}}
					        </ion-option>
					    </ion-select>
					  </ion-item>					
					  <ion-item>
					    <ion-label floating>Seleccione API Key </ion-label>
					    <ion-select [(ngModel)]="form_nueva_db.apk_key">
					    	<ion-option *ngFor="let apiset of dataSet" value="{{apiset.apk_key}}">
					            {{apiset.nombre}}
					        </ion-option>
					    </ion-select>
					  </ion-item>
					 <ion-item>
					    <ion-label floating>Nombre de DB</ion-label>
					    <ion-input type="text" value="" [(ngModel)]="form_nueva_db.nombre_db"></ion-input>
					  </ion-item>
					</ion-list>
				 <ion-item>
					<ion-row>
						<button ion-button color="dark" (click)="generar_base_de_datos()">Generar base de datos empresa</button>
					</ion-row>
				 </ion-item>
			    </ion-col>
			    <ion-col col-md-8 col-sm-12>
				<ion-grid no-padding>
					  <ion-row>
					    <ion-col  col-md-12 col-lg-6>
					    	<button ion-button color="dark" (click)="api_lista()">Lista de apis</button>
					    	<ion-card no-padding *ngFor="let item of dataSet; let msgIndex = index">
							    <ion-item>
								    <ion-card-content no-padding>
								     	<p [innerHTML]="item.nombre | linky"></p>	
									    <span >
										  <ion-item>
										    <ion-input placeholder="API KEY" value="{{item.apk_key}}"></ion-input>
										  </ion-item>
									    </span>
									    <span>{{this.converTime(item.created) | amTimeAgo}}</span>
								    </ion-card-content>
							   	</ion-item>
							 </ion-card>
					    </ion-col>
					    <ion-col col-md-12 col-lg-6>
					    	<button ion-button color="dark" (click)="lista_base_de_datos()">Lista de DB´s</button>
					    	<ion-card no-padding *ngFor="let itemb of listaDB; let msgIndex = index" >
							    <ion-item>
							    
								    <ion-card-content no-padding>
								    	<table>
								    		<tr><td><b>Nombre:</b></td>
								    			<td>{{itemb.nombre_db}}</td>
								    		</tr>
								    		<tr><td><b>Empresa:</b></td>
								    			<td>{{nombreEmpresa(itemb.id_empresa)}}</td>
								    		</tr>
								    		<tr><td><b>API:</b></td>
								    			<td>{{nombreApi(itemb.apk_key)}}</td>
								    		</tr>
								    	</table>
								     	
									    <span>
										  <ion-item>
										    <ion-input placeholder="DB KEY" value="{{itemb.db_key}}"></ion-input>
										  </ion-item>
									    </span>
								    </ion-card-content>
							   	</ion-item>
							  </ion-card>
			   			 </ion-col>
			  		</ion-row>
				</ion-grid>

			</ion-col>
  		</ion-row>
	</ion-grid>
</ion-content>